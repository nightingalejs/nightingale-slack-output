{"version":3,"sources":["../../src/node.js"],"names":[],"mappings":";;;;;;;;kBAewB,W;;AAdxB;;AACA;;;;;;;;;;;;;;;;;;;AAEA,IAAM,kFACD,4BAAO,KADN,EACc,SADd,uCAED,4BAAO,KAFN,EAEc,SAFd,uCAGD,4BAAO,IAHN,EAGa,SAHb,uCAID,4BAAO,IAJN,EAIa,SAJb,uCAKD,4BAAO,KALN,EAKc,QALd,uCAMD,4BAAO,QANN,EAMiB,QANjB,uCAOD,4BAAO,KAPN,EAOc,QAPd,uCAQD,4BAAO,SARN,EAQkB,QARlB,sBAAN;;;;;EAWe,SAAS,WAAT,CAAqB,WAArB,EAAkC;AAC7C,W;;;;aAAO,SAAS,KAAT,CAAe,IAAf,QAAyC;AAAA,gBAAlB,KAAkB,QAAlB,KAAkB;AAAA,gBAAX,OAAW,QAAX,OAAW;;AAC5C,gBAAM,OAAO;AACT,yBAAS,YAAY,OADZ;AAET,0BAAU,YAAY,QAFb;AAGT,0BAAU,YAAY,OAHb;AAIT,4BAAY,YAAY,SAJf;AAKT,6BAAa,CACT;AACI,8BAAU,IADd,E;AAEI,2BAAO,OAFX;AAGI,2BAAO,kBAAkB,KAAlB,CAHX;AAII,0BAAM,IAJV,E;AAKI,+BAAW,CAAC,MAAD;AALf,iBADS;AALJ,aAAb;;AAgBA,+BAAK,EAAE,KAAK,YAAY,UAAnB,EAA+B,MAAM,IAArC,EAA2C,MAAM,IAAjD,EAAL,EACK,EADL,CACQ,OADR,EACiB,UAAC,IAAD;AAAA,uBAAU,QAAQ,KAAR,CAAc,KAAK,KAAnB,CAAV;AAAA,aADjB;AAEH;AAnBD;AAoBH","file":"node.js","sourcesContent":["/* eslint camelcase: \"off\" */\nimport { post } from 'request';\nimport levels from 'nightingale-levels';\n\nconst levelToSlackColor = {\n    [levels.TRACE]: '#808080',\n    [levels.DEBUG]: '#808080',\n    [levels.INFO]: '#808080',\n    [levels.WARN]: 'warning',\n    [levels.ERROR]: 'danger',\n    [levels.CRITICAL]: 'danger',\n    [levels.FATAL]: 'danger',\n    [levels.EMERGENCY]: 'danger',\n};\n\nexport default function slackOutput(slackConfig) {\n    return function write(text, { level, message }) {\n        const body = {\n            channel: slackConfig.channel,\n            username: slackConfig.username,\n            icon_url: slackConfig.iconUrl,\n            icon_emoji: slackConfig.iconEmoji,\n            attachments: [\n                {\n                    fallback: text, // we could use raw-formatter here\n                    title: message,\n                    color: levelToSlackColor[level],\n                    text: text, // eslint-disable-line\n                    mrkdwn_in: ['text'],\n                },\n            ],\n        };\n\n        post({ url: slackConfig.webhookUrl, body: body, json: true })\n            .on('error', (err2) => console.error(err2.stack));\n    };\n}\n"]}