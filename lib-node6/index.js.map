{"version":3,"sources":["../src/index.js"],"names":["slackOutput","levelToSlackColor","TRACE","DEBUG","INFO","WARN","ERROR","CRITICAL","FATAL","EMERGENCY","slackConfig","write","markdown","raw","level","message","body","channel","username","icon_url","iconUrl","icon_emoji","iconEmoji","attachments","fallback","title","color","text","mrkdwn_in","url","webhookUrl","json","on","err2","console","error","stack"],"mappings":";;;;;kBAewBA,W;;AAdxB;;AACA;;;;;;AAFA;AAIA,MAAMC,oBAAoB;AACxB,GAAC,4BAAOC,KAAR,GAAgB,SADQ;AAExB,GAAC,4BAAOC,KAAR,GAAgB,SAFQ;AAGxB,GAAC,4BAAOC,IAAR,GAAe,SAHS;AAIxB,GAAC,4BAAOC,IAAR,GAAe,SAJS;AAKxB,GAAC,4BAAOC,KAAR,GAAgB,QALQ;AAMxB,GAAC,4BAAOC,QAAR,GAAmB,QANK;AAOxB,GAAC,4BAAOC,KAAR,GAAgB,QAPQ;AAQxB,GAAC,4BAAOC,SAAR,GAAoB;AARI,CAA1B;;AAWe,SAAST,WAAT,CAAqBU,WAArB,EAAkC;AAC/C,SAAO,SAASC,KAAT,cAAsD;AAAA,QAArCC,QAAqC,QAArCA,QAAqC;AAAA,QAA3BC,GAA2B,QAA3BA,GAA2B;AAAA,QAAlBC,KAAkB,SAAlBA,KAAkB;AAAA,QAAXC,OAAW,SAAXA,OAAW;;AAC3D,UAAMC,OAAO;AACXC,eAASP,YAAYO,OADV;AAEXC,gBAAUR,YAAYQ,QAFX;AAGXC,gBAAUT,YAAYU,OAHX;AAIXC,kBAAYX,YAAYY,SAJb;AAKXC,mBAAa,CACX;AACEC,kBAAUX,GADZ;AAEEY,eAAOV,OAFT;AAGEW,eAAOzB,kBAAkBa,KAAlB,CAHT;AAIEa,cAAMf,QAJR;AAKEgB,mBAAW,CAAC,MAAD;AALb,OADW;AALF,KAAb;;AAgBA,uBAAK,EAAEC,KAAKnB,YAAYoB,UAAnB,EAA+Bd,MAAMA,IAArC,EAA2Ce,MAAM,IAAjD,EAAL,EACSC,EADT,CACY,OADZ,EACsBC,IAAD,IAAUC,QAAQC,KAAR,CAAcF,KAAKG,KAAnB,CAD/B;AAED,GAnBD;AAoBD","file":"index.js","sourcesContent":["/* eslint camelcase: \"off\" */\nimport { post } from 'request';\nimport levels from 'nightingale-levels';\n\nconst levelToSlackColor = {\n  [levels.TRACE]: '#808080',\n  [levels.DEBUG]: '#808080',\n  [levels.INFO]: '#808080',\n  [levels.WARN]: 'warning',\n  [levels.ERROR]: 'danger',\n  [levels.CRITICAL]: 'danger',\n  [levels.FATAL]: 'danger',\n  [levels.EMERGENCY]: 'danger',\n};\n\nexport default function slackOutput(slackConfig) {\n  return function write({ markdown, raw }, { level, message }) {\n    const body = {\n      channel: slackConfig.channel,\n      username: slackConfig.username,\n      icon_url: slackConfig.iconUrl,\n      icon_emoji: slackConfig.iconEmoji,\n      attachments: [\n        {\n          fallback: raw,\n          title: message,\n          color: levelToSlackColor[level],\n          text: markdown,\n          mrkdwn_in: ['text'],\n        },\n      ],\n    };\n\n    post({ url: slackConfig.webhookUrl, body: body, json: true })\n            .on('error', (err2) => console.error(err2.stack));\n  };\n}\n"]}